<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>模型管理</title>
    <!--<link rel="stylesheet" type="text/css" href="lib/datables/datatables.min.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="lib/datables/DataTables-1.10.16/css/dataTables.bootstrap.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="css/bootstrap-3.3.7-dist/css/bootstrap.css"/>-->
</head>
<body>
<!--<table border="1"  id="table_id_example"  class="table table-striped table-bordered border-force" />-->
<!--<table id="table_id_example" class="display" width="90%"></table>-->
<!--<table id="table_id_example" class="display" style="width:80%">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th>First name</th>-->
        <!--<th>Last name</th>-->
        <!--<th>Position</th>-->
        <!--<th>Office</th>-->
        <!--<th>Start date</th>-->
        <!--<th>Salary</th>-->
    <!--</tr>-->
    <!--</thead>-->
    <!--<tfoot>-->
    <!--<tr>-->
        <!--<th>First name</th>-->
        <!--<th>Last name</th>-->
        <!--<th>Position</th>-->
        <!--<th>Office</th>-->
        <!--<th>Start date</th>-->
        <!--<th>Salary</th>-->
    <!--</tr>-->
    <!--</tfoot>-->
<!--</table>-->
<form action="batchImport" target="" id="uploadForm" method="post" enctype="multipart/form-data">
    　　<input id="file" type="file" accept=".doc,.docx" name="file" value="选择word文档"/>
    　　<input type="submit" name="submit" id="submit" value="保存" />
</form>



<div id="top">
</div>
<h2>模型列表</h2>
<hr>
<a href="javascript: AJAX.GET('/models/newModel')">绘制流程</a>
<table border="1" id="model-list">
    <tr>
        <td>模型编号</td>
        <td>模型名称</td>
        <td>版本</td>
        <td>创建时间</td>
        <td>操作</td>
    </tr>
    <script id="models" type="text/html">
        <tr>
            <td>模型编号</td>
            <td>模型名称</td>
            <td>版本</td>
            <td>创建时间</td>
            <td>操作</td>
        </tr>
        {{each rows.list}}
        <tr>
            <td>{{$value.id}}</td>
            <td>{{$value.name}}</td>
            <td>{{$value.version}}</td>
            <td>{{$value.createTime}}</td>
            <td>
                <a href="/modeler.html?modelId={{$value.id}}">编辑</a>
             <a href="javascript: AJAX.DELETE('/models/{{$value.id}}')">删除</a>
             <a href="javascript: AJAX.POST('/models/{{$value.id}}/deployment')">发布</a>
            </td>
        </tr>
        {{/each}}
    </script>
</table>
<hr>
<h2>部署列表</h2>
<hr>
<table border="1" id="deployment-list">
    <tr>
        <td>编号</td>
        <td>名称</td>
        <td>部署时间</td>
        <td>操作</td>
    </tr>
    <script id="deployments" type="text/html">
        <tr>
            <td>编号</td>
            <td>名称</td>
            <td>部署时间</td>
            <td>操作</td>
        </tr>
    {{each rows.list}}
    <tr>
        <td>{{$value.id}}</td>
        <td>{{$value.name}}</td>
        <td>{{$value.deploymentTime}}</td>
        <td><a href="javascript: AJAX.DELETE('/deployments/{{$value.id}}')">删除</a></td>
    </tr>
    {{/each}}
    </script>
</table>

<script type="text/javascript" src="lib/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="lib/js/jquery.cookie.js"></script>
<script type="text/javascript" src="js/ajax-util.js"></script>
<script type="text/javascript" src="lib/js/template.js"></script>
<!--<script type="text/javascript" src="lib/datables/datatables.js"></script>-->
<!--<script type="text/javascript" src="lib/datables/DataTables-1.10.16/js/dataTables.bootstrap.min.js"></script>-->
<!--<script type="text/javascript" src="lib/datables/DataTables-1.10.16/js/jquery.dataTables.min.js"></script>-->
<script>
$(function() {
    AJAX.GET("/models", null
            , function (result) {
                var html = template("models", result);
                $("#model-list").html(html);
            });

    AJAX.GET("/deployments", null
            , function (result) {
                var html = template("deployments", result);
                $("#deployment-list").html(html);
            });
})

var dataSet = [
    ['Trident','InternetInternet Internet Internet Internet Internet Internet Internet Internet Internet Internet Internet Internet Explorer 4.0','Win 95+','4','X'],
    ['Trident','Internet Explorer 5.0','Win 95+','5','C'],
    ['Trident','Internet Explorer 5.5','Win 95+','5.5','A'],
    ['Trident','Internet Explorer 6','Win 98+','6','A'],
    ['Trident','Internet Explorer 7','Win XP SP2+','7','A'],
    ['Trident','AOL browser (AOL desktop)','Win XP','6','A'],
    ['Gecko','Firefox 1.0','Win 98+ / OSX.2+','1.7','A'],
    ['Gecko','Firefox 1.5','Win 98+ / OSX.2+','1.8','A'],
    ['Gecko','Firefox 2.0','Win 98+ / OSX.2+','1.8','A'],
    ['Gecko','Firefox 3.0','Win 2k+ / OSX.3+','1.9','A'],
    ['Gecko','Camino 1.0','OSX.2+','1.8','A'],
    ['Gecko','Camino 1.5','OSX.3+','1.8','A'],
    ['Gecko','Netscape 7.2','Win 95+ / Mac OS 8.6-9.2','1.7','A'],
    ['Gecko','Netscape Browser 8','Win 98SE+','1.7','A'],
    ['Gecko','Netscape Navigator 9','Win 98+ / OSX.2+','1.8','A'],
    ['Gecko','Mozilla 1.0','Win 95+ / OSX.1+',1,'A'],
    ['Gecko','Mozilla 1.1','Win 95+ / OSX.1+',1.1,'A'],
    ['Gecko','Mozilla 1.2','Win 95+ / OSX.1+',1.2,'A'],
    ['Gecko','Mozilla 1.3','Win 95+ / OSX.1+',1.3,'A'],
    ['Gecko','Mozilla 1.4','Win 95+ / OSX.1+',1.4,'A'],
    ['Gecko','Mozilla 1.5','Win 95+ / OSX.1+',1.5,'A'],
    ['Gecko','Mozilla 1.6','Win 95+ / OSX.1+',1.6,'A'],
    ['Gecko','Mozilla 1.7','Win 98+ / OSX.1+',1.7,'A'],
    ['Gecko','Mozilla 1.8','Win 98+ / OSX.1+',1.8,'A'],
    ['Gecko','Seamonkey 1.1','Win 98+ / OSX.2+','1.8','A'],
    ['Gecko','Epiphany 2.20','Gnome','1.8','A'],
    ['Webkit','Safari 1.2','OSX.3','125.5','A'],
    ['Webkit','Safari 1.3','OSX.3','312.8','A'],
    ['Webkit','Safari 2.0','OSX.4+','419.3','A'],
    ['Webkit','Safari 3.0','OSX.4+','522.1','A'],
    ['Webkit','OmniWeb 5.5','OSX.4+','420','A'],
    ['Webkit','iPod Touch / iPhone','iPod','420.1','A'],
    ['Webkit','S60','S60','413','A'],
    ['Presto','Opera 7.0','Win 95+ / OSX.1+','-','A'],
    ['Presto','Opera 7.5','Win 95+ / OSX.2+','-','A'],
    ['Presto','Opera 8.0','Win 95+ / OSX.2+','-','A'],
    ['Presto','Opera 8.5','Win 95+ / OSX.2+','-','A'],
    ['Presto','Opera 9.0','Win 95+ / OSX.3+','-','A'],
    ['Presto','Opera 9.2','Win 88+ / OSX.3+','-','A'],
    ['Presto','Opera 9.5','Win 88+ / OSX.3+','-','A'],
    ['Presto','Opera for Wii','Wii','-','A'],
    ['Presto','Nokia N800','N800','-','A'],
    ['Presto','Nintendo DS browser','Nintendo DS','8.5','C/A<sup>1</sup>'],
    ['KHTML','Konqureror 3.1','KDE 3.1','3.1','C'],
    ['KHTML','Konqureror 3.3','KDE 3.3','3.3','A'],
    ['KHTML','Konqureror 3.5','KDE 3.5','3.5','A'],
    ['Tasman','Internet Explorer 4.5','Mac OS 8-9','-','X'],
    ['Tasman','Internet Explorer 5.1','Mac OS 7.6-9','1','C'],
    ['Tasman','Internet Explorer 5.2','Mac OS 8-X','1','C'],
    ['Misc','NetFront 3.1','Embedded devices','-','C'],
    ['Misc','NetFront 3.4','Embedded devices','-','A'],
    ['Misc','Dillo 0.8','Embedded devices','-','X'],
    ['Misc','Links','Text only','-','X'],
    ['Misc','Lynx','Text only','-','X'],
    ['Misc','IE Mobile','Windows Mobile 6','-','C'],
    ['Misc','PSP browser','PSP','-','C'],
    ['Other browsers','All others','-','-','U']
];
$(document).ready( function () {
    $('#table_id_example').DataTable(
        // {
        //     // data: dataSet,
        //     ajax: {
        //         url:"/home/process",
        //         dataType: "json",
        //         type: "POST"
        //     },//加载数据
        //     columns: [
        //         { "title": "引擎" , "sWidth" : "30%" },
        //         { "title": "浏览器" , "sWidth" : "10%"},
        //         { "title": "平台" , "sWidth" : "20%" },
        //         { "title": "版本", "class": "center" , "sWidth" : "20%"},
        //         { "title": "等级", "class": "center" , "sWidth" : "20%"}
        //     ],
        //     serverSide: true,//服务器端分页
        //     processing: true,//显示正在加载
        //     sort: false,//不能排序
        //     searchable: false,//可以搜索
        //     ajax: {
        //         url: '/api/data',
        //         dataFilter: function(data){
        //             var json = jQuery.parseJSON( data );
        //             json.recordsTotal = json.total;
        //             json.recordsFiltered = json.total;
        //             json.data = json.list;
        //             return JSON.stringify( json ); // return JSON string
        //         }
        //     },
        //     autoWidth: false, //自动设置宽度关闭
        //     columnDefs : [ {
        //         sDefaultContent : '',
        //         aTargets : [ '_all' ]
        //     } ],
        //     language: {
        //         zeroRecords: "没有找到记录",
        //         processing: "正在加载数据...",
        //         lengthMenu: "每页显示 _MENU_ 条记录",
        //         info: "当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录",
        //         infoEmpty: "当前显示 0 到 0 条，共 0 条记录",
        //         infoFiltered: "(从 _MAX_ 条记录中筛选)",
        //         search: "搜索",
        //         searchPlaceholder: "登录名",
        //         paginate: {
        //             first: "第一页",
        //             previous: " 上一页 ",
        //             next: " 下一页 ",
        //             last: " 最后一页 "
        //         }
        //     }
        // });
        {
            processing: true,
            serverSide: true,
            "ajax": {
                "url": "home/process",
                "type": "POST",
                "data":{start:0,offset:10},//传递的数据
                "dataType" : "json"
            },
            "columns": [
                { title:"first_name" ,data: "first_name" },
                { title:"last_name","data": "last_name" },
                { title:"position","data": "position" },
                { title:"office","data": "office" },
                { title:"start_date","data": "start_date" },
                { title:"salary","data": "salary" }
            ]
        } );
});
</script>

</body>
</html>
